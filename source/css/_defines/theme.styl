// Deprecated function. Keep for compatibility.
theme($t)
  convert(hexo-config('style.prefers_theme')) == $t

$color-background-h = hue($color-background)
$color-background-s = saturation($color-background)
$color-background-l = lightness($color-background)

$color-block-h = hue($color-block)
$color-block-s = saturation($color-block)
$color-block-l = lightness($color-block)

$color-code-h = hue($color-code)
$color-code-s = saturation($color-code)
$color-code-l = lightness($color-code)

$color-text-h = hue($color-text)
$color-text-s = saturation($color-text)
$color-text-l = lightness($color-text)

_dark_text()
  --text: hsl($color-text-h, $color-text-s, 0)
  --text-p1: hsl($color-text-h, $color-text-s, $color-text-l)
  --text-p2: hsl($color-text-h, $color-text-s, $color-text-l / 0.5 * 0.75)
  --text-p3: hsl($color-text-h, $color-text-s, $color-text-l / 0.5 * 1.25)
  --text-p4: hsl($color-text-h, $color-text-s, $color-text-l / 0.5 * 1.5)
  --text-meta: hsl($color-text-h, $color-text-s, $color-text-l / 0.5 * 2)
  --text-code: hsl($color-code-h, $color-code-s, $color-code-l)

_light_text()
  --text: hsl($color-text-h, $color-text-s, 100)
  --text-p1: hsl($color-text-h, $color-text-s, 100 - $color-text-l / 0.5 * 0.5)
  --text-p2: hsl($color-text-h, $color-text-s, 100 - $color-text-l / 0.5 * 0.75)
  --text-p3: hsl($color-text-h, $color-text-s, 100 - $color-text-l / 0.5 * 1.2)
  --text-p4: hsl($color-text-h, $color-text-s, 100 - $color-text-l / 0.5 * 1.4)
  --text-meta: hsl($color-text-h, $color-text-s, 100 - $color-text-l / 0.5 * 1.75)
  --text-code: hsl($color-code-h, $color-code-s, (100 - $color-code-l) * 1.2)



_light_terminal()
  .terminal-container {
    --bg-color: #ffffff;
    --text-color: #000000;
    --border-color: #e0e0e0;
    --title-color: #4a4a4a;
    --version-color: #6a6a6a;
    --welcome-color: #27ae60;
    --prompt-color: #2980b9;
    --btn-bg-color: #f0f0f0;
    --btn-text-color: #000000;
    --btn-hover-color: #e0e0e0;
    --command-color: #d35400;
    --scrollbar-bg: #f0f0f0;
    --scrollbar-thumb: #c0c0c0;
    --scrollbar-hover: #a0a0a0;
    --shadow-color: rgba(0, 0, 0, 0.1);
  }



_dark_terminal()
  .terminal-container {
    --bg-color: #2c2c2c;
    --text-color: #ffffff;
    --border-color: #1a1a1a;
    --title-color: #d4d4d4;
    --version-color: #a0a0a0;
    --welcome-color: #5ad75a;
    --prompt-color: #5ac8fa;
    --btn-bg-color: #4a4a4a;
    --btn-text-color: #ffffff;
    --btn-hover-color: #5a5a5a;
    --command-color: #ffd60a;
    --scrollbar-bg: #2c2c2c;
    --scrollbar-thumb: #4a4a4a;
    --scrollbar-hover: #5a5a5a;
    --shadow-color: rgba(0, 0, 0, 0.5);
    --close-btn-color: #ff5f56;
    --minimize-btn-color: #ffbd2e;
    --maximize-btn-color: #27c93f;
  }





_common_root()
  :root
    --theme-link: $color-link

_light_root()
  --site-bg: hsl($color-background-h, $color-background-s, $color-background-l)
  --card: hsl($color-block-h, $color-block-s, 100)
  --block: hsl($color-block-h, $color-block-s, 95)
  --block-border: hsl($color-block-h, $color-block-s, 90)
  --block-hover: hsl($color-block-h, $color-block-s, 92)
  --theme-link-opa: rgba($color-link, 0.2)
  --theme-link-opaq: rgba($color-link, 0.3)
  --leftbar-bg: hsl($color-block-h, $color-block-s, 90)
  --alpha20: rgba(white, 0.2)
  --alpha40: rgba(white, 0.4)
  --alpha45: rgba(white, 0.4)
  --alpha50: rgba(white, 0.5)
  --alphagg: rgba(grey, 0.05)
  --alpha60: rgba(white, 0.6)
  --alpha75: rgba(white, 0.75)
  --alpha100: white
  --tag-bg-color: #F2EEFD
  --tag-text-color: #835EEC
  --label-orange-background: #fdf3ec
  --label-orange-text: #f28e49
  --label-blue-background: #ecf6fd
  --label-blue-text: #439cdb
  _dark_text()
  _light_terminal()


_dark_root()
  --site-bg: hsl($color-background-h, $color-background-s * 0.5, (100 - $color-background-l) * 2 + 8)
  --card: hsl($color-block-h, $color-block-s * 1.2, 24)
  --block: hsl($color-block-h, $color-block-s, 16)
  --block-border: hsl($color-block-h, $color-block-s, 24)
  --block-hover: hsl($color-block-h, $color-block-s, 20)
  --theme-link-opa: rgba($color-link, 0.4)
  --theme-link-opaq: rgba($color-link, 0.3)
  --leftbar-bg: hsl($color-block-h, $color-block-s, 24)
  --alpha20: rgba(black, 0.2)
  --alpha40: rgba(black, 0.4)
  --alpha45: rgba(black, 0.4)
  --alpha50: rgba(black, 0.5)
  --alpha60: rgba(black, 0.6)
  --alpha75: rgba(black, 0.75)
  --alpha100: black
  --tag-bg-color: #282433
  --tag-text-color: #A28BF2
  --label-orange-background: #372d29
  --label-orange-text: #ec8a44
  --label-blue-background: #292e37
  --label-blue-text: #73d2f7
  _light_text()
  _dark_terminal()
  /*@media screen and (max-width: $device-mobile-max)
    --site-bg: black*/

_common_root()

:root[data-theme="light"]
  _light_root()
:root[data-theme="dark"]
  _dark_root()
:root:not([data-theme])
  _light_root()
  @media (prefers-color-scheme: dark)
    _dark_root()
